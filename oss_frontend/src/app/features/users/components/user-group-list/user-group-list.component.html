<div class="user-group-list-container">
  <div class="list-header">
    <h2>User Groups</h2>
    <a class="btn btn-primary"
       routerLink="create">
      <i class="fas fa-plus"></i> Create Group
    </a>
  </div>

  @if (loading) {
    <div class="loading-container">
      <div class="spinner"></div>
      <p>Loading user groups...</p>
    </div>
  }

  @if (error) {
    <div class="alert alert-danger">
      {{ error }}
    </div>
  }

  @if (!loading && !error) {
    <div class="list-content">
      @if (groups.length === 0) {
        <div class="empty-state">
          <i class="fas fa-users"></i>
          <p>No user groups found</p>
          <a class="btn btn-primary"
             routerLink="create">
            <i class="fas fa-plus"></i> Create Group
          </a>
        </div>
      } @else {
        <div class="table-container">
          <table class="table">
            <thead>
            <tr>
              <th>Name</th>
              <th>Description</th>
              <th>Parent Group</th>
              <th>Created At</th>
              <th>Actions</th>
            </tr>
            </thead>
            <tbody>
              @for (group of groups; track group.id) {
                <tr>
                  <td>{{ group.name }}</td>
                  <td>{{ group.description || 'No description provided' }}</td>
                  <td>{{ group.parent_details?.name || 'None' }}</td>
                  <td>{{ group.created_at | date:'medium' }}</td>
                  <td class="actions">
                    <a class="btn btn-sm btn-primary"
                       [routerLink]="[group.id, 'edit']"
                       title="Edit">
                      <i class="fas fa-edit"></i> Edit
                    </a>
                    <button class="btn btn-sm btn-danger"
                            (click)="onDeleteGroup(group.id)"
                            title="Delete">
                      <i class="fas fa-trash"></i> Delete
                    </button>
                  </td>
                </tr>
              }
            </tbody>
          </table>

          @if (totalItems > pageSize) {
            <div class="pagination">
              <button
                class="btn btn-outline-primary"
                [disabled]="currentPage === 1"
                (click)="onPageChange(currentPage - 1)"
              >
                <i class="fas fa-chevron-left"></i> Previous
              </button>
              <span class="page-info">Page {{ currentPage }} of {{ Math.ceil(totalItems / pageSize) }}</span>
              <button
                class="btn btn-outline-primary"
                [disabled]="currentPage >= Math.ceil(totalItems / pageSize)"
                (click)="onPageChange(currentPage + 1)"
              >
                Next <i class="fas fa-chevron-right"></i>
              </button>
            </div>
          }
        </div>
      }
    </div>
  }
</div>
