<div class="change-password-container">
  <div class="form-header">
    <h2>Change Password</h2>
  </div>

  <div *ngIf="error" class="alert alert-danger">
    {{ error }}
  </div>

  <div *ngIf="success" class="alert alert-success">
    Password changed successfully. Redirecting...
  </div>

  <form [formGroup]="passwordForm" (ngSubmit)="onSubmit()" class="password-form">
    <div class="form-row">
      <div class="form-group">
        <label for="old_password">Current Password</label>
        <div class="password-input-wrapper">
          <input
            [type]="showOldPassword ? 'text' : 'password'"
            id="old_password"
            formControlName="old_password"
            class="form-control"
            [class.is-invalid]="isFieldInvalid('old_password')"
          >
          <i 
            class="fas" 
            [class.fa-eye]="!showOldPassword" 
            [class.fa-eye-slash]="showOldPassword"
            (click)="togglePasswordVisibility('old')"
          ></i>
        </div>
        <div *ngIf="isFieldInvalid('old_password')" class="invalid-feedback">
          {{ getErrorMessage('old_password') }}
        </div>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="new_password">New Password</label>
        <div class="password-input-wrapper">
          <input
            [type]="showNewPassword ? 'text' : 'password'"
            id="new_password"
            formControlName="new_password"
            class="form-control"
            [class.is-invalid]="isFieldInvalid('new_password')"
          >
          <i 
            class="fas" 
            [class.fa-eye]="!showNewPassword" 
            [class.fa-eye-slash]="showNewPassword"
            (click)="togglePasswordVisibility('new')"
          ></i>
        </div>
        <div *ngIf="isFieldInvalid('new_password')" class="invalid-feedback">
          {{ getErrorMessage('new_password') }}
        </div>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="confirm_password">Confirm New Password</label>
        <div class="password-input-wrapper">
          <input
            [type]="showConfirmPassword ? 'text' : 'password'"
            id="confirm_password"
            formControlName="confirm_password"
            class="form-control"
            [class.is-invalid]="isFieldInvalid('confirm_password')"
          >
          <i 
            class="fas" 
            [class.fa-eye]="!showConfirmPassword" 
            [class.fa-eye-slash]="showConfirmPassword"
            (click)="togglePasswordVisibility('confirm')"
          ></i>
        </div>
        <div *ngIf="isFieldInvalid('confirm_password')" class="invalid-feedback">
          {{ getErrorMessage('confirm_password') }}
        </div>
      </div>
    </div>

    <div class="form-actions">
      <button
        type="button"
        class="btn btn-secondary"
        (click)="onCancel()"
        [disabled]="submitting"
      >
        Cancel
      </button>
      <button
        type="submit"
        class="btn btn-primary"
        [disabled]="passwordForm.invalid || submitting"
      >
        <span *ngIf="submitting" class="spinner spinner-sm"></span>
        Change Password
      </button>
    </div>
  </form>
</div> 